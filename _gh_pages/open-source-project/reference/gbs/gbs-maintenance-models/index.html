<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>

  Maintenance Models Supported by GBS &middot; Tizen Platform

</title>

<!-- Bootstrap CSS -->
<link href="/assets/bootstrap-4.0.0-beta/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- FontAwesome -->
<link href="/assets/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet">
<!-- Favicon -->
<link href="/assets/favicon.ico" rel="icon">

  <!-- Scripts -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script>window.jQuery || document.write('<script src="/assets/bootstrap-4.0.0-beta/assets/js/vendor/jquery-slim.min.js"><\/script>')</script>
<script src="/assets/bootstrap-4.0.0-beta/assets/js/vendor/popper.min.js"></script>
<script src="/assets/bootstrap-4.0.0-beta/dist/js/bootstrap.min.js"></script>
<script src="/assets/bootstrap-4.0.0-beta/assets/js/vendor/anchor.min.js"></script>
<script src="/assets/bootstrap-4.0.0-beta/assets/js/vendor/clipboard.min.js"></script>
<script src="/assets/bootstrap-4.0.0-beta/assets/js/vendor/holder.min.js"></script>

<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="/assets/bootstrap-4.0.0-beta/assets/js/ie10-viewport-bug-workaround.js"></script>
<script src="/assets/bootstrap-4.0.0-beta/assets/js/ie-emulation-modes-warning.js"></script>

<!-- Search highlight -->
<script src="/assets/js/search/highlight.js"></script>

</head>
<body>
  <!-- Navigation bar -->
<link href="/assets/css/navbar.css" rel="stylesheet">
<nav class="navbar navbar-expand-md navbar-dark fixed-top">
  <a class="navbar-brand" href="/index.html">
    <i class="fa fa-star" aria-hidden="true"></i>
  </a>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarCollapse">
    <ul class="navbar-nav mr-auto">
      
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
          
          
          
    <li class="nav-item ">
      <a class="nav-link" href="/home/">Docs</a>
    </li>
          
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
          
          
          
    <li class="nav-item active dropdown">
      <a class="nav-link dropbtn">Open Source Project <i class="fa fa-caret-down" aria-hidden="true"></i></a>
      <div class="dropdown-content">
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
                
        <a href="/open-source-project/overview/tizen-open-source-project">Overview</a>
                
              
            
              
              
            
              
              
            
              
              
                
        <a href="/open-source-project/developing/installing">Developing</a>
                
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
                
        <a href="/open-source-project/porting/overview">Porting</a>
                
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
                
        <a href="/open-source-project/reference/gerrit-usage">Reference</a>
                
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
                
        <a href="/open-source-project/release-notes/tizen-4-0-m2">Release Notes</a>
                
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
                
        <a href="/open-source-project/compliance/compliance-program">Compliance</a>
                
              
            
              
              
                
        <a href="/open-source-project/tizen-rt/">Tizen RT</a>
                
              
            
              
              
            
              
              
                
        <a href="/open-source-project/tizen-studio/overview">Tizen Studio</a>
                
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
      </div>
    </li>
          
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
          
          
          
    <li class="nav-item  dropdown">
      <a class="nav-link dropbtn">Application <i class="fa fa-caret-down" aria-hidden="true"></i></a>
      <div class="dropdown-content">
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
                
        <a href="/application/overview/">Overview</a>
                
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
                
        <a href="/application/native/overview">Native Application</a>
                
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
                
        <a href="/application/design/introduction">Design</a>
                
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
      </div>
    </li>
          
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
    </ul>
    <form class="form-inline mt-2 mt-md-0" action="/search" method="get">
      <input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search" id="search-box" name="q">
      <button class="btn btn-outline-success my-2 my-sm-0" type="submit" value="search">Search</button>
    </form>
  </div>
</nav>
<!-- Navigation bar end -->

  <link href="/assets/css/solution.css" rel="stylesheet">
<link href="/assets/css/markdown.css" rel="stylesheet">
<div class="container-fluid">
  <!-- Sidebar -->
<link href="/assets/css/sidebar.css" rel="stylesheet">
<nav class="col-sm-3 col-md-2 d-none d-sm-block bg-light sidebar">




  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
  <div class="item-root item-first">
      
    <a href="/open-source-project/overview/tizen-open-source-project">Overview</a>
      
  </div>
    
    
  

  
  

  
  

  
  
    
  <div class="item-root ">
      
    <a href="/open-source-project/developing/installing">Developing</a>
      
  </div>
    
    
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
  <div class="item-root ">
      
    <a href="/open-source-project/porting/overview">Porting</a>
      
  </div>
    
    
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
  <div class="item-root active ">
    <a href="/open-source-project/reference/gerrit-usage">Reference</a>
    <ul>
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
          
      <li>
        
        <a href="/open-source-project/reference/gerrit-usage/">Gerrit</a>
        
      </li>
          
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
          
      <li class="active">
			  <a href="/open-source-project/reference/gbs/gbs-overview">GBS</a>
      </li>
      <ul>
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
                
        <li>
          
          <a href="/open-source-project/reference/gbs/gbs-overview/">Overview</a>
          
        </li>
                
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
                
        <li>
          
          <a href="/open-source-project/reference/gbs/usage/gbs-reference">GBS Usage</a>
          
        </li>
                
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
                
        <li>
          
          <a href="/open-source-project/reference/gbs/gbs.conf/">GBS Configuration</a>
          
        </li>
                
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
                
        <li class="active">
          <a href="/open-source-project/reference/gbs/gbs-maintenance-models/">Maintenance Models Supported by GBS</a>
        </li>

        <ul>
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
                    
                    
                  
        </ul>

                
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
                
        <li>
          
          <a href="/open-source-project/reference/gbs/gbs-faq/">GBS Frequently Asked Questions</a>
          
        </li>
                
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
      </ul>
          
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
    </ul>
  </div>
    
    
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
  <div class="item-root ">
      
    <a href="/open-source-project/release-notes/tizen-4-0-m2">Release Notes</a>
      
  </div>
    
    
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
  <div class="item-root ">
      
    <a href="/open-source-project/compliance/compliance-program">Compliance</a>
      
  </div>
    
    
  

  
  
    
  <div class="item-root ">
      
    <a href="/open-source-project/tizen-rt/">Tizen RT</a>
      
  </div>
    
    
  

  
  

  
  
    
  <div class="item-root ">
      
    <a href="/open-source-project/tizen-studio/overview">Tizen Studio</a>
      
  </div>
    
    
  

  
  

  
  

  
  

  
  

  
  

</nav>
<!-- Sidebar end -->

  <main class="col-sm-9 ml-sm-auto col-md-10 pt-3">
  <div class="bd-content doc-content">
    <h1 id="maintenance-models-supported-by-gbs">Maintenance Models Supported by GBS</h1>

<p>From a package maintenance point of view, packages can be divided into 2 categories:</p>

<ul>
  <li><strong>Native</strong> packages, where you (Tizen) are the upstream and control the source code repository. An example in the context of Tizen could be power-manager. For native packages, you control the versioning and releasing, so package maintenance is simpler. You can release a new version basically whenever you want.</li>
  <li><strong>Non-native (or upstream)</strong> packages, for which you (Tizen) are not the upstream. For example, the Linux kernel or zlib. For these packages, you need to follow the releasing process and schedule of the upstream project. For example, from a developer and legal point of view, it is very beneficial to clearly track the local modifications (that is, separate upstream and local changes) both in the source code repository and on the packaging level.</li>
</ul>

<p>GBS divides packages into these 2 categories. GBS determines a package as non-native, if the Git repository has an upstream branch. The actual name of the upstream branch can be configured using the <code class="highlighter-rouge">upstream_branch</code>  option in the <code class="highlighter-rouge">.gbs.conf</code> file or with the <code class="highlighter-rouge">--upstream-branch</code> command line option.</p>

<p>GBS <code class="highlighter-rouge">build</code>, <code class="highlighter-rouge">remotebuild</code>, and <code class="highlighter-rouge">export</code> commands behave differently for native and non-native packages. Namely, the preparation of the packaging files for building differs.</p>

<p>GBS currently supports 2 different maintenance models for non-native packages: one with packaging and source code in the same branch and one with separate packaging and development branches.</p>

<h2 id="gbs-and-native-packages">GBS and Native Packages</h2>

<p>GBS simply creates a monolithic source tarball from the HEAD of the current branch. Packaging files, from the packaging directory, are copied as is. No patch generation is done.</p>

<p>The Git repository layout looks like this:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>         v1.0    v2.0
            |       |
o---A---B---C---D---E   master
</code></pre></div></div>

<h2 id="gbs-and-non-native-packages-with-joint-packaging">GBS and Non-native Packages with Joint-packaging</h2>

<p>In the joint-packaging model (where packaging and development are in the same branch), packaging data (spec file etc) is kept in the same branch with the source code:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>              F---G---H   master <span class="o">(</span>packaging + code changes<span class="o">)</span>
             /
o---A---B---C---D---E     upstream
            |       |
          v1.0    v2.0
</code></pre></div></div>

<p>GBS tries to create a (real) upstream source tarball, auto-generate patches from the local changes, and auto-update the spec file accordingly. The logic is the following:</p>

<ul>
  <li>Generate patches
    <ul>
      <li>Create patches between upstream-tagâ€¦HEAD, and remove possible old patches</li>
      <li>Update the spec file: remove old <code class="highlighter-rouge">Patch:</code> tags and <code class="highlighter-rouge">%patch</code> macros and replace them with ones that correspond with the newly generated patches.</li>
    </ul>
  </li>
  <li>Create an upstream tarball if patch-generation was successful
    <ul>
      <li>If the Git repository has a pristine-tar branch (and you have the pristine-tar tool installed), GBS tries to checkout the source tarball with pristine-tar.</li>
      <li>If the previous step fails, GBS tries to create a source tarball from the correct upstream tag, matching the version taken from the <code class="highlighter-rouge">.spec</code> file.</li>
    </ul>
  </li>
  <li>If the source tarball or patch generation fails, GBS reverts back to the old method (that is, treats the package as native), creating just 1 monolithic tarball without patch generation.</li>
</ul>

<p>You cannot have any pre-existing patches in the packaging directory or spec file. Otherwise, GBS refuses to create patches. For information on manually maintained patches, see <a href="#manually-maintained-patches">Manually Maintained Patches</a>.</p>

<h2 id="gbs-and-non-native-packages-with-orphan-packaging">GBS and Non-native Packages with Orphan-packaging</h2>

<p>In the orphan-packaging model (with separate packaging and development branches), packaging data is kept in a separate (orphan) branch with no source code or common history with the code development branches:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>o---I---J---K---L         master <span class="o">(</span>packaging<span class="o">)</span>

              F---G---H   development/master/1.0 <span class="o">(</span><span class="nb">local source </span>code changes<span class="o">)</span>
             /
o---A---B---C---D---E     upstream
            |       |
          v1.0    v2.0
</code></pre></div></div>

<p>All packaging data, including patches, is stored in the packaging branch. The development branch only contains upstream sources with no packaging data. The <code class="highlighter-rouge">gbs devel</code> command assists in working with the separate branches.</p>

<p>Developers work on the development branch, making changes to the source code. When the package maintainer wants to release a new version of the package, they export changes (with <code class="highlighter-rouge">gbs devel</code>, 1 patch per commit) from the development branch to the packaging branch, commit the changes, update the change log, and submit a new version.</p>

<p>When building/exporting the package, GBS creates a real upstream source tarball (similar to the joint-packaging model). Patches are auto-generated (and the spec file auto-modified) when working on the development branch. When working on the packaging branch, the packaging files are exported with no modifications.</p>

<h2 id="building-in-the-joint-packaging-model">Building in the Joint-packaging Model</h2>

<p>For GBS to see the package as non-native (which enables upstream source tarball and patch generation), you need to:</p>

<ol>
  <li>Have an upstream branch in the Git repository, with untouched upstream sources.</li>
  <li>Have the upstream tag format configured correctly in the package-specific <code class="highlighter-rouge">.gbs.conf</code> file. The default is <code class="highlighter-rouge">upstream/${upstreamversion}</code>.</li>
  <li>Have your development branch be based on the upstream version (indicated in the <code class="highlighter-rouge">.spec</code> file).</li>
  <li>Have all your local manually maintained patches (in the packaging directory) applied to your development branch and removed from the packaging directory.</li>
</ol>

<p>Additionally, you can have a pristine-tar branch in the Git repository for generating the upstream tarball with the <code class="highlighter-rouge">pristine-tar</code> tool.</p>

<p>Edit, commit, and build code on your development branch. GBS handles the tarball and patch generation, as well as updating the <code class="highlighter-rouge">.spec</code> file. The following example demonstrates how GBS behaves in this situation (<code class="highlighter-rouge">gbs export</code> is being used as an example here for the truncated output):</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ gbs export -o export
info: Generating patches from git (v1.2.7..HEAD)
info: Didn't find any old '%patch' macros, adding new patches after the last '%setup' macro at line %s
info: Didn't find any old 'Patch' tags, adding new patches after the last 'Source' tag.
info: zlib-1.2.7.tar.bz2 does not exist, creating from 'v1.2.7'
info: package files have been exported to:
/home/test/src/zlib/export/zlib-1.2.7-0
</code></pre></div></div>

<p>When trying out the patch generation for the first time, first run the export command and examine the auto-updated spec file in the export directory to ensure that GBS updated it correctly. For information on manually maintained patches, see <a href="#manually-maintained-patches">Manually Maintained Patches</a>.</p>

<p>The upstream tarball and patch generation operation can fail for several reasons:</p>

<ul>
  <li>Upstream tag was not found
    <ul>
      <li>Correct version is not present in the Git repository</li>
      <li>Tag format is configured incorrectly</li>
    </ul>
  </li>
  <li>Current branch is not a descendant of the upstream version that it claims to be derived from</li>
</ul>

<h2 id="building-in-the-orphan-packaging-model">Building in the Orphan-packaging Model</h2>

<p>In order to use the orphan-packaging model with non-native packages, you need to:</p>

<ol>
  <li>Have an upstream branch in the Git repository, with untouched upstream sources.</li>
  <li>Have the upstream tag format configured correctly in the package-specific <code class="highlighter-rouge">.gbs.conf</code> file. The default is <code class="highlighter-rouge">upstream/${upstreamversion}</code>.</li>
  <li>Have an orphan packaging branch that only contains packaging files, including patches.</li>
  <li>Have a development branch in which all patches have been applied on top of the upstream version.</li>
</ol>

<p>Again, additionally, you can have a pristine-tar branch in the Git repository for generating the upstream tarball with the <code class="highlighter-rouge">pristine-tar</code> tool.</p>

<p>Code development is done on the development branch: edit, commit, and build similarly to the joint-packaging model. However, all packaging changes are done in the packaging branch. And most importantly, submissions (releasing to integration) are done from the packaging branch. Before submitting, the package maintainer creates patches from the new changes in the development branch and commits these to the packaging branch. For more information on how to manage packaging and development branches, see <a href="gbs-devel.md">gbs devel</a>.</p>

<h2 id="managing-upstream-sources">Managing Upstream Sources</h2>

<p>To maintain packages using the model described above, you need to keep unmodified upstream sources in a separate branch in your Git repository. GBS supports 2 models for this.</p>

<ul>
  <li>
    <p>Import upstream source archive to Git</p>

    <p>In this model, you import source tarballs (or ZIP files) from the upstream release to your Git repository using the <code class="highlighter-rouge">gbs import</code> command. GBS commits the sources in the upstream branch and creates a tag for the upstream release. An example of starting from scratch, that is importing to an empty repo:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>mkdir zlib <span class="o">&amp;&amp;</span> <span class="nb">cd </span>zlib <span class="o">&amp;&amp;</span> git init
<span class="nv">$ </span>gbs import ../zlib-1.2.6.tar.gz
...
<span class="nv">$ </span>git branch
<span class="k">*</span> master
upstream
<span class="nv">$ </span>git tag
upstream/1.2.6
</code></pre></div>    </div>

    <p>Now you can start development just by adding packaging files to the master branch. When you need to update to a newer upstream version, use the <code class="highlighter-rouge">gbs import</code> command again:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>gbs import ../zlib-1.2.7.tar.gz
<span class="nv">$ </span>git tag
upstream/1.2.6
upstream/1.2.7
</code></pre></div>    </div>

    <blockquote>
      <p><strong>Note</strong></p>

      <p>Currently, GBS automatically merges the new upstream version to your master branch. You need to update the version number in your spec file accordingly.</p>
    </blockquote>
  </li>
  <li>
    <p>Track the remote Git</p>

    <p>In this model, you directly track a remote (Git) repository and the <code class="highlighter-rouge">gbs import</code> command is not used. GBS needs to know only the name of the upstream branch and the format of the upstream release tags. These are package-dependent information so you must configure them in a package-specific <code class="highlighter-rouge">.gbs.conf</code> in the master branch. For example, to start a package from scratch:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git clone git://github.com/madler/zlib.git <span class="o">&amp;&amp;</span> <span class="nb">cd </span>zlib
<span class="nv">$ </span>git branch <span class="nt">-m</span> master origin <span class="c"># to keep origin tracking the upstream</span>
<span class="nv">$ </span>git checkout <span class="nt">-b</span> master
<span class="nv">$ </span>vim .gbs.conf
<span class="nv">$ </span>git add .gbs.conf <span class="o">&amp;&amp;</span> git commit <span class="nt">-m</span><span class="s2">"Add gbs.conf"</span>
</code></pre></div>    </div>

    <p>The example <code class="highlighter-rouge">.gbs.conf</code> configuration file is:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[general]
upstream_branch = origin
upstream_tag = v${upstreamversion}
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="pristine-tar-support">Pristine-tar Support</h3>

<p>You can use the <code class="highlighter-rouge">pristine-tar</code> for storing and checking out the upstream tarballs (see <a href="http://joeyh.name/code/pristine-tar/">http://joeyh.name/code/pristine-tar/</a>). You can install <code class="highlighter-rouge">pristine-tar</code> from the Tizen tools repository. The tool guarantees that the tarball generated by GBS is bit-identical to the real upstream release source tarball. GBS uses <code class="highlighter-rouge">pristine-tar</code> automatically if you have it installed on your system. If you use <code class="highlighter-rouge">gbs import</code> to manage the upstream sources, it automatically commits new tarballs to the pristine-tar branch.</p>

<blockquote>
  <p><strong>Note</strong></p>

  <p>The use of the <code class="highlighter-rouge">pristine-tar</code> tool is optional, but highly recommended.</p>
</blockquote>

<p>However, if you track a remote upstream repository directly, you need to commit the upstream source tarballs to the pristine-tar branch manually. For example:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd </span>zlib
<span class="nv">$ </span>git branch
<span class="k">*</span> master
origin
<span class="nv">$ </span>pristine-tar commit ../zlib-1.2.7.tar.gz v1.2.7
<span class="nv">$ </span>git branch
<span class="k">*</span> master
origin
pristine-tar
</code></pre></div></div>

<h2 id="converting-an-existing-repository-to-a-non-native-package">Converting an Existing Repository to a Non-native Package</h2>

<p>To convert an existing repository to a non-native package:</p>

<ol>
  <li>An upstream branch is required:
    <ul>
      <li>If you are already tracking the upstream, just configure the upstream branch name and tag format in the package-specific <code class="highlighter-rouge">.gbp.conf</code> file.</li>
      <li>If not, import the upstream source tarball with <code class="highlighter-rouge">gbs import</code> or add the upstream remote to your repository and start tracking that.
        <blockquote>
          <p><strong>Tip</strong>:</p>

          <p>If you are tracking the upstream Git directly, consider running the <code class="highlighter-rouge">pristine-tar commit &lt;tarball&gt; &lt;upstream-tag&gt;</code> command.</p>
        </blockquote>
      </li>
    </ul>
  </li>
  <li>Rebase your current development branch on the correct upstream version (that is, rebase on the upstream tag).</li>
  <li>Remove all local patches: apply and commit them on top of your development branch and then remove the patches from the packaging directory and preferably from the spec file, too.</li>
  <li>Optionally, if you want to maintain the package using the orphan-packaging model, you can create the packaging and development branches using the <code class="highlighter-rouge">gbs devel convert</code> command.</li>
</ol>

<h2 id="advanced-usage">Advanced Usage</h2>

<p><a name="manually-maintained-patches"></a></p>
<h3 id="manually-maintained-patches">Manually Maintained Patches</h3>

<p>GBS supports patches that are maintained manually, outside the automatic patch generation. This can be needed for architecture-dependent patches, for example, as GBS patch generation does not yet support conditional patches. Another example are patches that are applied on top of a secondary source tree, whose sources are not maintained in your Git tree, but only as a tarball in your packaging directory.</p>

<p>To use this feature, you must have your patches in the packaging directory and listed in the spec file. In addition, you must mark the patch to be ignored by the patch generation/importing by putting the <code class="highlighter-rouge"># Gbp-Ignore-Patches: &lt;patch numbers&gt;</code> line into the spec file. This makes GBS ignore the <code class="highlighter-rouge">Patch:</code> tags and <code class="highlighter-rouge">%patch</code> macros of the listed patches when importing or generating patches. An excerpt of an example spec file:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...
Source0: %{name}-%{version}.tar.bz2
# Gbp-Ignore-Patches: 0
Patch0: my.patch

%description
...
</code></pre></div></div>

<p>The <code class="highlighter-rouge">Gbp-Ignore-Patches</code> marker can be placed anywhere in the file, and is case-insensitive. The GBP prefix comes from git-buildpackage (gbp), which is used by GBS as the backend for patch generation.</p>

<blockquote>
  <p><strong>Note</strong></p>

  <p>Pay attention to patch generation when building or exporting. The <code class="highlighter-rouge">gbs import</code> tool also ignores patches marked for manual maintenance when importing source RPMs.</p>
</blockquote>

<h3 id="patch-macro-location">Patch Macro Location</h3>

<p>GBS tries to automatically find the correct location to add the <code class="highlighter-rouge">%patch</code> macros in the spec file when updating it with the newly generated patches. This is usually successful, but GBS can also guess wrong. You can manually mark the location for auto-generated <code class="highlighter-rouge">%patch</code> macros by adding a <code class="highlighter-rouge"># Gbp-Patch-Macros</code> marker line into the spec file:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...
%prep
%setup
# do things here...

# Gbp-Patch-Macros

# do more things here...

%build
</code></pre></div></div>

<p>GBS places the new <code class="highlighter-rouge">%patch</code> macros after the marker line. This marker is case-insensitive, similar to <code class="highlighter-rouge"># Gbp-Ignore-Patches</code>.</p>

<h3 id="squashing-commits">Squashing Commits</h3>

<p>When generating patches, GBS supports squashing several commits into 1 monolithic diff. Currently, you can only squash from upstream-tag up to a given commit-ish. An example use case is squashing commits from an upstream release up to a stable update into a single diff (commits on top of the stable generate multiple patches normally). You can enable this with the <code class="highlighter-rouge">squash_patches_until</code> config file option or with the <code class="highlighter-rouge">--squash-patches-until</code> command line option: the format for the option is <code class="highlighter-rouge">&lt;commit-ish&gt;[:&lt;filename-base&gt;]</code>.</p>

<p>For example:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git branch
<span class="k">*</span> master
stable
upstream
<span class="nv">$ </span>gbs <span class="nb">export</span> <span class="nt">--squash-patches-until</span><span class="o">=</span>stable:stable-update
info: Generating patches from git <span class="o">(</span>upstream/0.1.2..HEAD<span class="o">)</span>
info: Squashing commits a2a7d82..9c0f5ba into one monolithic <span class="s1">'stable-update.diff'</span>
info: Didn<span class="s1">'t find any old '</span>Patch<span class="s1">' tags, adding new patches after the last '</span>Source<span class="s1">' tag.
info: Didn'</span>t find any old <span class="s1">'%patch'</span> macros, adding new patches after the last <span class="s1">'%setup'</span> macro
info: mypackage-0.1.2.tar.gz does not exist, creating from <span class="s1">'upstream/0.1.2'</span>
info: package files have been exported to:
/home/user/src/mypackage/packaging/mypackage-0.1.2-1.21
</code></pre></div></div>

<blockquote>
  <p><strong>Note</strong></p>

  <p>If you are planning to use this feature, configure it in the package-specific <code class="highlighter-rouge">.gbs.conf</code> file. This way, all users (including the automatic build machinery) build and export the package in a similar way.</p>
</blockquote>

    <!-- Page info -->
<p class="text-muted small">

  


  <br>
  Last updated May 28, 2018


</p>
<!-- Page info end -->
  </div>
  <aside class="side-nav">
    <!-- Page navigation -->
<link href="/assets/css/pagenav.css" rel="stylesheet">
<div class="table-of-content" id="pagenav-table">
  <div class="table-of-content-header"><a href="#">Index</a></div>
  <div class="table-of-content-anchors">
    <ul class="anchor-list" id="pagenav-index"/>
  </div>
</div>
<script src="/assets/js/pagenav.js"></script>
<!-- Page navigation end -->
  </aside>
</main>

</div>

  <!-- Floating button -->
  <!--
  <a href="#" style="position: fixed; bottom: 20px; right: 20px;" class="btn btn-light">
    <i class="fa fa-arrow-up"></i>
  </a>
  -->
</body>
</html>
