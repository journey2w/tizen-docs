<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>

  Location &middot; Tizen Platform

</title>

<!-- Bootstrap CSS -->
<link href="/assets/bootstrap-4.0.0-beta/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- FontAwesome -->
<link href="/assets/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet">
<!-- Favicon -->
<link href="/assets/favicon.ico" rel="icon">

  <!-- Scripts -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script>window.jQuery || document.write('<script src="/assets/bootstrap-4.0.0-beta/assets/js/vendor/jquery-slim.min.js"><\/script>')</script>
<script src="/assets/bootstrap-4.0.0-beta/assets/js/vendor/popper.min.js"></script>
<script src="/assets/bootstrap-4.0.0-beta/dist/js/bootstrap.min.js"></script>
<script src="/assets/bootstrap-4.0.0-beta/assets/js/vendor/anchor.min.js"></script>
<script src="/assets/bootstrap-4.0.0-beta/assets/js/vendor/clipboard.min.js"></script>
<script src="/assets/bootstrap-4.0.0-beta/assets/js/vendor/holder.min.js"></script>

<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<script src="/assets/bootstrap-4.0.0-beta/assets/js/ie10-viewport-bug-workaround.js"></script>
<script src="/assets/bootstrap-4.0.0-beta/assets/js/ie-emulation-modes-warning.js"></script>

<!-- Search highlight -->
<script src="/assets/js/search/highlight.js"></script>

</head>
<body>
  <!-- Navigation bar -->
<link href="/assets/css/navbar.css" rel="stylesheet">
<nav class="navbar navbar-expand-md navbar-dark fixed-top">
  <a class="navbar-brand" href="/index.html">
    <i class="fa fa-star" aria-hidden="true"></i>
  </a>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarCollapse">
    <ul class="navbar-nav mr-auto">
      
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
          
          
          
    <li class="nav-item ">
      <a class="nav-link" href="/home/">Docs</a>
    </li>
          
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
          
          
          
    <li class="nav-item active dropdown">
      <a class="nav-link dropbtn">Open Source Project <i class="fa fa-caret-down" aria-hidden="true"></i></a>
      <div class="dropdown-content">
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
                
        <a href="/open-source-project/overview/tizen-open-source-project">Overview</a>
                
              
            
              
              
            
              
              
            
              
              
                
        <a href="/open-source-project/developing/installing">Developing</a>
                
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
                
        <a href="/open-source-project/porting/overview">Porting</a>
                
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
                
        <a href="/open-source-project/reference/gerrit-usage">Reference</a>
                
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
                
        <a href="/open-source-project/release-notes/tizen-4-0-m2">Release Notes</a>
                
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
                
        <a href="/open-source-project/compliance/compliance-program">Compliance</a>
                
              
            
              
              
                
        <a href="/open-source-project/tizen-rt/">Tizen RT</a>
                
              
            
              
              
            
              
              
                
        <a href="/open-source-project/tizen-studio/overview">Tizen Studio</a>
                
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
      </div>
    </li>
          
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
          
          
          
    <li class="nav-item  dropdown">
      <a class="nav-link dropbtn">Application <i class="fa fa-caret-down" aria-hidden="true"></i></a>
      <div class="dropdown-content">
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
                
        <a href="/application/overview/">Overview</a>
                
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
                
        <a href="/application/native/overview">Native Application</a>
                
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
                
        <a href="/application/design/introduction">Design</a>
                
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
      </div>
    </li>
          
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
    </ul>
    <form class="form-inline mt-2 mt-md-0" action="/search" method="get">
      <input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search" id="search-box" name="q">
      <button class="btn btn-outline-success my-2 my-sm-0" type="submit" value="search">Search</button>
    </form>
  </div>
</nav>
<!-- Navigation bar end -->

  <link href="/assets/css/solution.css" rel="stylesheet">
<link href="/assets/css/markdown.css" rel="stylesheet">
<div class="container-fluid">
  <!-- Sidebar -->
<link href="/assets/css/sidebar.css" rel="stylesheet">
<nav class="col-sm-3 col-md-2 d-none d-sm-block bg-light sidebar">




  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
  <div class="item-root item-first">
      
    <a href="/open-source-project/overview/tizen-open-source-project">Overview</a>
      
  </div>
    
    
  

  
  

  
  

  
  
    
  <div class="item-root ">
      
    <a href="/open-source-project/developing/installing">Developing</a>
      
  </div>
    
    
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
  <div class="item-root active ">
    <a href="/open-source-project/porting/overview">Porting</a>
    <ul>
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
          
      <li>
        
        <a href="/open-source-project/porting/overview/">Overview</a>
        
      </li>
          
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
          
      <li>
        
        <a href="/open-source-project/porting/kernel/">Kernel</a>
        
      </li>
          
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
          
      <li>
        
        <a href="/open-source-project/porting/recovery/">System Recovery</a>
        
      </li>
          
        
      
        
        
          
      <li>
        
        <a href="/open-source-project/porting/system/">System</a>
        
      </li>
          
        
      
        
        
      
        
        
      
        
        
          
      <li>
        
        <a href="/open-source-project/porting/graphics-and-ui/">Graphics and UI</a>
        
      </li>
          
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
          
      <li>
        
        <a href="/open-source-project/porting/multimedia/">Multimedia</a>
        
      </li>
          
        
      
        
        
          
      <li>
        
        <a href="/open-source-project/porting/connectivity/">Connectivity</a>
        
      </li>
          
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
          
      <li class="active">
			  <a href="/open-source-project/porting/location/">Location</a>
      </li>
      <ul>
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
      </ul>
          
        
      
        
        
      
        
        
      
        
        
          
      <li>
        
        <a href="/open-source-project/porting/telephony/">Telephony</a>
        
      </li>
          
        
      
        
        
          
      <li>
        
        <a href="/open-source-project/porting/application/">Application</a>
        
      </li>
          
        
      
    </ul>
  </div>
    
    
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
  <div class="item-root ">
      
    <a href="/open-source-project/reference/gerrit-usage">Reference</a>
      
  </div>
    
    
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
  <div class="item-root ">
      
    <a href="/open-source-project/release-notes/tizen-4-0-m2">Release Notes</a>
      
  </div>
    
    
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    
  <div class="item-root ">
      
    <a href="/open-source-project/compliance/compliance-program">Compliance</a>
      
  </div>
    
    
  

  
  
    
  <div class="item-root ">
      
    <a href="/open-source-project/tizen-rt/">Tizen RT</a>
      
  </div>
    
    
  

  
  

  
  
    
  <div class="item-root ">
      
    <a href="/open-source-project/tizen-studio/overview">Tizen Studio</a>
      
  </div>
    
    
  

  
  

  
  

  
  

  
  

  
  

</nav>
<!-- Sidebar end -->

  <main class="col-sm-9 ml-sm-auto col-md-10 pt-3">
  <div class="bd-content doc-content">
    <h1 id="location">Location</h1>

<p>The Location framework provides location-based services (LBS), including the position information, satellite information and GPS status.</p>

<p>You can use the following location features:</p>

<ul>
  <li>Getting the current position, last known position, accuracy, distance, and velocity of the device</li>
  <li>Getting satellite information from GPS and GLONASS</li>
  <li>Notifying a user when they enter or exit a predefined set of boundaries, known as geofence, like school attendance zones or neighborhood boundaries</li>
</ul>

<p><strong>Figure: Tizen location architecture</strong></p>

<p><img src="media/location.png" alt="Tizen location architecture" /></p>

<p>The main location service components are:</p>

<ul>
  <li>Location framework</li>
  <li>Location manager</li>
  <li>Location library, which contains the location providers that can be used by the location manager to get services</li>
  <li>GPS (global positioning system), which provides position information, velocity, and satellite information. It is used to get the current position of a device.</li>
  <li>dbus, which is the IPC used to communicate between the location module and the Location daemon.</li>
  <li>lbs-server, which provides position, velocity, NMEA, and satellite information by communicating with a GPS chip. It has the following functionalities:
    <ul>
      <li>Initializes and deinitializes the GPS, opens and closes GPS applications.</li>
      <li>Provides the position result for the location library.</li>
      <li>Manages location sessions; determines session termination based on session status.</li>
      <li>Provides a serial interface with the GPS receiver.</li>
      <li>Enables the GPS chipset to support standalone GPS positioning methods.</li>
      <li>Supports the standalone operation mode.</li>
    </ul>
  </li>
</ul>

<h3 id="porting-the-oal-interface">Porting the OAL Interface</h3>

<p>The GPS plugin is implemented for vendor-specific GPS devices based on the Tizen lbs-server. The GPS plugin is implemented as a shared library and the lbs-server loads a specific GPS plugin at runtime. A GPS plugin must be written with predefined interfaces.</p>

<p>The <code class="highlighter-rouge">lbs-server-plugin-dev</code> source package is installed on OBS by adding the following command in the package spec file:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>BuildRequires: pkgconfig(lbs-server-plugin)
</code></pre></div></div>

<p>The <code class="highlighter-rouge">lbs-server-plugin-dev</code> package source files can be found in the following directories:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/usr/include/lbs-server-plugin/*.h
/usr/lib/pkgconfig/lbs-server-plugin.pc
</code></pre></div></div>

<p>The <code class="highlighter-rouge">gps_plugin_intf.h</code> header file includes the API interfaces for the communication between the lbs-server and its GPS plugin.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="cm">/* Initialize the plugin module and register callback function for event delivery */</span>
    <span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">init</span><span class="p">)</span> <span class="p">(</span><span class="n">gps_event_cb</span> <span class="n">gps_event_cb</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">user_data</span><span class="p">);</span>
    <span class="cm">/* Deinitialize the plugin module */</span>
    <span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">deinit</span><span class="p">)</span> <span class="p">(</span><span class="n">gps_failure_reason_t</span> <span class="o">*</span><span class="n">reason_code</span><span class="p">);</span>
    <span class="cm">/* Request specific action to plugin module */</span>
    <span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">request</span><span class="p">)</span> <span class="p">(</span><span class="n">gps_action_t</span> <span class="n">gps_action</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">gps_action_data</span><span class="p">,</span> <span class="n">gps_failure_reason_t</span> <span class="o">*</span><span class="n">reason_code</span><span class="p">);</span>
<span class="p">}</span> <span class="n">gps_plugin_interface</span><span class="p">;</span>
</code></pre></div></div>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">const</span> <span class="n">gps_plugin_interface</span> <span class="o">*</span><span class="n">get_gps_plugin_interface</span><span class="p">();</span>
</code></pre></div></div>

<p>The <code class="highlighter-rouge">get_gps_plugin_interface()</code> function must be exported in the GPS plugin. It gives the <code class="highlighter-rouge">gps_plugin_interface</code> structure to the lbs-server, and the lbs-server communicates through these interfaces. When the lbs-server is started, the GPS plugin is loaded and the <code class="highlighter-rouge">init()</code> function is called. At this moment, a GPS device must be initialized.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">init</span><span class="p">)</span> <span class="p">(</span><span class="n">gps_event_cb</span> <span class="n">gps_event_cb</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">user_data</span><span class="p">);</span>
</code></pre></div></div>

<p>When the <code class="highlighter-rouge">init()</code> function is called, the <code class="highlighter-rouge">gps_event_cb</code> callback is set. GPS events and data from a GPS device are delivered through the callback.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">typedef</span> <span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">gps_event_cb</span><span class="p">)</span> <span class="p">(</span><span class="n">gps_event_info_t</span> <span class="o">*</span><span class="n">gps_event_info</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">user_data</span><span class="p">);</span>
</code></pre></div></div>

<p>The following example describes the GPS events:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
    <span class="n">GPS_EVENT_START_SESSION</span> <span class="o">=</span> <span class="mh">0x0000</span><span class="p">,</span> <span class="cm">/* The session is started */</span>
    <span class="n">GPS_EVENT_STOP_SESSION</span><span class="p">,</span> <span class="cm">/* The session is stopped */</span>
    <span class="n">GPS_EVENT_CHANGE_INTERVAL</span><span class="p">,</span> <span class="cm">/* Change updating interval */</span>
    <span class="n">GPS_EVENT_REPORT_POSITION</span> <span class="o">=</span> <span class="mh">0x0100</span><span class="p">,</span> <span class="cm">/* Bring up GPS position data */</span>
    <span class="n">GPS_EVENT_REPORT_SATELLITE</span><span class="p">,</span> <span class="cm">/* Bring up GPS SV data */</span>
    <span class="n">GPS_EVENT_REPORT_NMEA</span><span class="p">,</span> <span class="cm">/* Bring up GPS NMEA data */</span>
    <span class="n">GPS_EVENT_SET_OPTION</span> <span class="o">=</span> <span class="mh">0x0200</span><span class="p">,</span> <span class="cm">/* The option is set */</span>
    <span class="n">GPS_EVENT_GET_REF_LOCATION</span> <span class="o">=</span> <span class="mh">0x0300</span><span class="p">,</span> <span class="cm">/* Get the reference location for AGPS */</span>
    <span class="n">GPS_EVENT_GET_IMSI</span><span class="p">,</span> <span class="cm">/* Get IMSI for identification */</span>
    <span class="n">GPS_EVENT_OPEN_DATA_CONNECTION</span> <span class="o">=</span> <span class="mh">0x0400</span><span class="p">,</span> <span class="cm">/* Request opening data network connection */</span>
    <span class="n">GPS_EVENT_CLOSE_DATA_CONNECTION</span><span class="p">,</span> <span class="cm">/* Request closing data network connection */</span>
    <span class="n">GPS_EVENT_DNS_LOOKUP_IND</span><span class="p">,</span> <span class="cm">/* Request resolving host name */</span>
    <span class="n">GPS_EVENT_AGPS_VERIFICATION_INDI</span><span class="p">,</span> <span class="cm">/* Verification indicator for AGPS is required */</span>
    <span class="n">GPS_EVENT_FACTORY_TEST</span> <span class="o">=</span> <span class="mh">0x0500</span><span class="p">,</span><span class="cm">/* Factory test is done */</span>
    <span class="n">GPS_EVENT_ERR_CAUSE</span> <span class="o">=</span> <span class="mh">0xFFFF</span> <span class="cm">/* Some error is occurred */</span>
<span class="p">}</span> <span class="n">gps_event_id_t</span><span class="p">;</span>
</code></pre></div></div>

<p>The GPS events contain specific GPS event data which is part of the delivered <code class="highlighter-rouge">gps_event_data_t</code> (see the <code class="highlighter-rouge">gps_plugin_intf.h</code> file). When the lbs-server wants to make a request to a GPS device, the <code class="highlighter-rouge">request()</code> function is called:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">request</span><span class="p">)</span> <span class="p">(</span><span class="n">gps_action_t</span> <span class="n">gps_action</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">gps_action_data</span><span class="p">,</span> <span class="n">gps_failure_reason_t</span> <span class="o">*</span><span class="n">reason_code</span><span class="p">);</span>
</code></pre></div></div>

<p>Each request is classified by <code class="highlighter-rouge">gps_action_t</code>.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">typedef</span> <span class="k">enum</span> <span class="p">{</span>
    <span class="n">GPS_ACTION_SEND_PARAMS</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
    <span class="n">GPS_ACTION_START_SESSION</span><span class="p">,</span>
    <span class="n">GPS_ACTION_STOP_SESSION</span><span class="p">,</span>
    <span class="n">GPS_ACTION_CHANGE_INTERVAL</span><span class="p">,</span>
    <span class="n">GPS_INDI_SUPL_VERIFICATION</span><span class="p">,</span>
    <span class="n">GPS_INDI_SUPL_DNSQUERY</span><span class="p">,</span>
    <span class="n">GPS_ACTION_START_FACTTEST</span><span class="p">,</span>
    <span class="n">GPS_ACTION_STOP_FACTTEST</span><span class="p">,</span>
    <span class="n">GPS_ACTION_REQUEST_SUPL_NI</span><span class="p">,</span>
    <span class="n">GPS_ACTION_DELETE_GPS_DATA</span><span class="p">,</span>
<span class="p">}</span> <span class="n">gps_action_t</span><span class="p">;</span>
</code></pre></div></div>

<p>With the standalone GPS (unassisted GPS), the <code class="highlighter-rouge">GPS_ACTION_START_SESSION</code> and <code class="highlighter-rouge">GPS_ACTION_STOP_SESSION</code> are mandatory actions. If the <code class="highlighter-rouge">GPS_ACTION_START_SESSION</code> is delivered, the GPS plugin starts the acquisition of satellites and reports the <code class="highlighter-rouge">GPS_EVENT_START_SESSION</code> event to the lbs-server through the <code class="highlighter-rouge">gps_event_cb</code> callback. Once the acquisition is completed and position is fixed, the position must be delivered by the <code class="highlighter-rouge">gps_event_cb</code> callback with the <code class="highlighter-rouge">GPS_EVENT_REPORT_POSITION</code> event ID and the position data.</p>

<p>To shut down the lbs-server, deinitialize the GPS device with the <code class="highlighter-rouge">deinit()</code> function:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="p">(</span><span class="o">*</span><span class="n">deinit</span><span class="p">)</span> <span class="p">(</span><span class="n">gps_failure_reason_t</span> <span class="o">*</span><span class="n">reason_code</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="adding-a-new-gps-plugin">Adding a new GPS plugin</h3>

<p>The <code class="highlighter-rouge">check_plugin_module(char* module_name)</code> function checks the access to the available plugin in the <code class="highlighter-rouge">/sys/devices/platform</code> directory and the <code class="highlighter-rouge">load_plugin_module</code> loads the plugin during the boot up time.</p>

<p>Add the necessary path definitions:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define PLATFORM_PATH "/sys/devices/platform"
#define PLUGIN_PATH PLATFORM_PATH"/xxxxx_gps"
</span></code></pre></div></div>

<h2 id="geofence">Geofence</h2>

<p>The Geofence Manager API provides a service related to geofence. A geofence is a virtual perimeter for a real-world geographic area.</p>

<p><strong>Figure: Tizen geofence architecture</strong></p>

<p><img src="media/524px-geofence.png" alt="Tizen geofence architecture" /></p>

<p>You can set a geofence based on a geopoint, a Wi-Fi MAC address, or a Bluetooth address. Notifications are provided for events, such as changes in the service status.</p>

<p>There are 2 kinds of places and fences:</p>

<ul>
  <li>Public places and fences that are created by the MyPlace application can be used by all applications.</li>
  <li>Private places and fences that are created by a specific application can only be used by that same application.</li>
</ul>

<p>Notifications can be received about the following events:</p>

<ul>
  <li>Zone in event when a device enters a specific area</li>
  <li>Zone out event when a device exits a specific area</li>
  <li>Results and errors for each event requested by the geofence module</li>
</ul>

<h2 id="map-service">Map Service</h2>

<p>The Location Maps API (Maps API) allows you to create map-aware applications.</p>

<p><strong>Figure: Tizen Maps API</strong></p>

<p><img src="media/mapservice.png" alt="Tizen Maps API" /></p>

<p>The Maps API has the following features:</p>

<ul>
  <li>Geocoder (geocoding and reverse geocoding)</li>
  <li>Places (search places)</li>
  <li>Routes (search directions)</li>
  <li>Map Widget (rendering map images)</li>
</ul>

<p>The Maps API allows you to select a map service provider to be included in the plugins.</p>

<h3 id="porting-the-oal-interface-1">Porting the OAL Interface</h3>

<p>The Maps plugin is implemented as a shared library and the Maps framework loads a specific Maps plugin at runtime. A Maps plugin must be written with predefined interfaces.</p>

<p>The <code class="highlighter-rouge">capi-maps-service-plugin-devel</code> source package is installed on OBS by adding the following command in the package specification file:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>BuildRequires: pkgconfig(capi-maps-service-plugin-devel)
</code></pre></div></div>

<p>The <code class="highlighter-rouge">capi-maps-service-plugin-devel</code> package source files can be found in the following directories:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/usr/include/maps/maps_plugin*.h
/usr/include/maps/maps_*_plugin.h
/usr/include/maps/maps_extra_types.h
</code></pre></div></div>

<p>The <code class="highlighter-rouge">module.h</code> header file includes the API interfaces for the communication between the Maps and its plugin.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">typedef</span> <span class="k">struct</span> <span class="n">_interface_s</span> <span class="p">{</span>
    <span class="cm">/* Plugin dedicated functions */</span>
    <span class="n">maps_plugin_init_f</span> <span class="n">maps_plugin_init</span><span class="p">;</span>
    <span class="n">maps_plugin_shutdown_f</span> <span class="n">maps_plugin_shutdown</span><span class="p">;</span>
    <span class="n">maps_plugin_get_info_f</span> <span class="n">maps_plugin_get_info</span><span class="p">;</span>
    <span class="n">maps_plugin_init_module_f</span> <span class="n">maps_plugin_init_module</span><span class="p">;</span>

    <span class="cm">/* Maps Provider access key, preference, and capabilities */</span>
    <span class="n">maps_plugin_set_provider_key_f</span> <span class="n">maps_plugin_set_provider_key</span><span class="p">;</span>
    <span class="n">maps_plugin_get_provider_key_f</span> <span class="n">maps_plugin_get_provider_key</span><span class="p">;</span>
    <span class="n">maps_plugin_set_preference_f</span> <span class="n">maps_plugin_set_preference</span><span class="p">;</span>
    <span class="n">maps_plugin_get_preference_f</span> <span class="n">maps_plugin_get_preference</span><span class="p">;</span>
    <span class="n">maps_plugin_is_service_supported_f</span> <span class="n">maps_plugin_is_service_supported</span><span class="p">;</span>
    <span class="n">maps_plugin_is_data_supported_f</span> <span class="n">maps_plugin_is_data_supported</span><span class="p">;</span>

    <span class="cm">/* Geocode */</span>
    <span class="n">maps_plugin_geocode_f</span> <span class="n">maps_plugin_geocode</span><span class="p">;</span>
    <span class="n">maps_plugin_geocode_inside_area_f</span> <span class="n">maps_plugin_geocode_inside_area</span><span class="p">;</span>
    <span class="n">maps_plugin_geocode_by_structured_address_f</span> <span class="n">maps_plugin_geocode_by_structured_address</span><span class="p">;</span>
    <span class="n">maps_plugin_reverse_geocode_f</span> <span class="n">maps_plugin_reverse_geocode</span><span class="p">;</span>
    <span class="n">maps_plugin_multi_reverse_geocode_f</span> <span class="n">maps_plugin_multi_reverse_geocode</span><span class="p">;</span>

    <span class="cm">/* Place */</span>
    <span class="n">maps_plugin_search_place_f</span> <span class="n">maps_plugin_search_place</span><span class="p">;</span>
    <span class="n">maps_plugin_search_place_by_area_f</span> <span class="n">maps_plugin_search_place_by_area</span><span class="p">;</span>
    <span class="n">maps_plugin_search_place_by_address_f</span> <span class="n">maps_plugin_search_place_by_address</span><span class="p">;</span>
    <span class="n">maps_plugin_search_place_list_f</span> <span class="n">maps_plugin_search_place_list</span><span class="p">;</span>
    <span class="n">maps_plugin_get_place_details_f</span> <span class="n">maps_plugin_get_place_details</span><span class="p">;</span>

    <span class="cm">/* Route */</span>
    <span class="n">maps_plugin_search_route_f</span> <span class="n">maps_plugin_search_route</span><span class="p">;</span>
    <span class="n">maps_plugin_search_route_waypoints_f</span> <span class="n">maps_plugin_search_route_waypoints</span><span class="p">;</span>

    <span class="cm">/* Cancel request */</span>
    <span class="n">maps_plugin_cancel_request_f</span> <span class="n">maps_plugin_cancel_request</span><span class="p">;</span>

    <span class="cm">/* Mapping */</span>
    <span class="n">maps_plugin_create_map_view_f</span> <span class="n">maps_plugin_create_map_view</span><span class="p">;</span>
    <span class="n">maps_plugin_destroy_map_view_f</span> <span class="n">maps_plugin_destroy_map_view</span><span class="p">;</span>
    <span class="n">maps_plugin_render_map_f</span> <span class="n">maps_plugin_render_map</span><span class="p">;</span>
    <span class="n">maps_plugin_move_center_f</span> <span class="n">maps_plugin_move_center</span><span class="p">;</span>
    <span class="n">maps_plugin_set_scalebar_f</span> <span class="n">maps_plugin_set_scalebar</span><span class="p">;</span>
    <span class="n">maps_plugin_get_scalebar_f</span> <span class="n">maps_plugin_get_scalebar</span><span class="p">;</span>
    <span class="n">maps_plugin_on_object_f</span> <span class="n">maps_plugin_on_object</span><span class="p">;</span>
    <span class="n">maps_plugin_screen_to_geography_f</span> <span class="n">maps_plugin_screen_to_geography</span><span class="p">;</span>
    <span class="n">maps_plugin_geography_to_screen_f</span> <span class="n">maps_plugin_geography_to_screen</span><span class="p">;</span>
    <span class="n">maps_plugin_get_min_zoom_level_f</span> <span class="n">maps_plugin_get_min_zoom_level</span><span class="p">;</span>
    <span class="n">maps_plugin_get_max_zoom_level_f</span> <span class="n">maps_plugin_get_max_zoom_level</span><span class="p">;</span>
    <span class="n">maps_plugin_get_center_f</span> <span class="n">maps_plugin_get_center</span><span class="p">;</span>
    <span class="n">maps_plugin_capture_snapshot_f</span> <span class="n">maps_plugin_capture_snapshot</span><span class="p">;</span>
<span class="p">}</span> <span class="n">interface_s</span><span class="p">;</span>
</code></pre></div></div>

<p>These functions must be implemented and exported in the Maps plugin. To create a Maps handle classified by a provider name string, the <code class="highlighter-rouge">maps_plugin_get_info()</code> function must provide the name. The name is recommended to be capitalized.</p>

<p>The Maps plugins are located in the <code class="highlighter-rouge">/usr/lib/maps/plugins</code> directory.</p>

<h4 id="here-maps-plugin">HERE Maps Plugin</h4>

<p>For now, the HERE Maps plugin is embedded in the platform, with the provider name HERE. To use this plugin, you must get the credential keys from the <a href="https://developer.here.com/">HERE developers site</a>. You may need to pay a fee depending on the expected map service usage.</p>

<p>To get the user consent required by HERE, a user consent application included in the HERE Maps plugin is launched the first time the user attempts to access the map services, if consent has not been given before that time.</p>

    <!-- Page info -->
<p class="text-muted small">

  


  <br>
  Last updated May 28, 2018


</p>
<!-- Page info end -->
  </div>
  <aside class="side-nav">
    <!-- Page navigation -->
<link href="/assets/css/pagenav.css" rel="stylesheet">
<div class="table-of-content" id="pagenav-table">
  <div class="table-of-content-header"><a href="#">Index</a></div>
  <div class="table-of-content-anchors">
    <ul class="anchor-list" id="pagenav-index"/>
  </div>
</div>
<script src="/assets/js/pagenav.js"></script>
<!-- Page navigation end -->
  </aside>
</main>

</div>

  <!-- Floating button -->
  <!--
  <a href="#" style="position: fixed; bottom: 20px; right: 20px;" class="btn btn-light">
    <i class="fa fa-arrow-up"></i>
  </a>
  -->
</body>
</html>
